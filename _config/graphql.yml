---
name: frameworktestgraphql
After: '#graphqlconfig'
Only:
  classexists: 'SilverStripe\GraphQL\Schema\Schema'
---

SilverStripe\Core\Injector\Injector:
  SilverStripe\GraphQL\Controller.frameworktest:
    class: SilverStripe\GraphQL\Controller
    constructor:
      schemaKey: frameworktest

SilverStripe\Control\Director:
  rules:
    'frameworktest/graphql':
      Controller: '%$SilverStripe\GraphQL\Controller.frameworktest'

SilverStripe\GraphQL\Schema\Schema:
  schemas:
    frameworktest:
      config:
        modelConfig:
          type_mapping:
            SilverStripe\FrameworkTest\Model\Company: Company
            SilverStripe\FrameworkTest\Model\Employee: Employee
      models:
        SilverStripe\FrameworkTest\Model\Company:
          fields:
            id: true
            name: true
            category: true
            revenue: true
            ceo: true
            employees: true
            pastEmployees: true
          operations:
            read: true
            update: true
            create: true
            delete: true
            readOne: true
        SilverStripe\FrameworkTest\Model\Employee:
          fields:
            id: true
            name: true
            biography: true
            dateOfBirth: true
            category: true
          operations:
            read: true
            update: true
            create: true
            delete: true
            readOne: true
